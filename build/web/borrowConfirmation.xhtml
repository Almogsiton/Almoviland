<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <!--
    Page Purpose:
    1. Confirms to the user that the movie borrowing was successful.
    2. Displays key details of the transaction: movie title, borrow date, remaining copies, and allowed borrows.
    3. Shows a modal dialog with option to return to the homepage.
    -->

    <h:panelGroup rendered="#{pageController.currentPage eq 'borrowConfirmation'}">
        <div class="modal-overlay">
            <div class="modal-dialog">

                <h:form>
                    <div class="movie-dialog-content">                        
                        <div class="poster-section">
                            <h:graphicImage value="#{movieBean.getMovieImageBase64(borrowBean.selectedMovie.movieId)}"
                                            styleClass="modal-poster"/>
                        </div>

                        <div class="info-section">
                            <h2 class="movie-title">Borrow Confirmed ðŸŽ‰</h2>

                            <p>
                                <span class="label">ðŸŽ¬ Movie:</span>
                                #{borrowBean.selectedMovie.title}
                            </p>

                            <p>
                                <span class="label">ðŸ“… Borrow Date:</span>
                                <h:outputText value="#{borrowBean.borrowDate}">
                                    <f:convertDateTime pattern="yyyy-MM-dd"/>
                                </h:outputText>
                            </p>

                            <p>
                                <span class="label">âœ… Available Copies:</span>
                                #{borrowBean.availableCopiesAfterBorrow}
                            </p>

                            <p>
                                <span class="label">ðŸŽ¯ Remaining Borrows:</span>
                                #{borrowBean.remainingBorrowsAfterBorrow}
                            </p>

                            <div class="dialog-buttons">
                                <h:commandButton value="ðŸ  Back to Home"
                                                 action="#{pageController.setPage('home')}"
                                                 styleClass="action-btn">
                                    <f:ajax execute="@this" render="@all"/>
                                </h:commandButton>
                            </div>
                        </div>
                    </div>
                </h:form>

            </div>
        </div>
    </h:panelGroup>

</ui:composition>
