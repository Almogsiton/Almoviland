<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:panelGroup rendered="#{pageController.currentPage eq 'editMovie'}">
        <h1>Manage Movie</h1>        
        <h:form>
            <h:commandButton value="Back to Categories Management" action="#{pageController.setPage('moviesManagement')}">
                <f:ajax execute="@form" render="@all"/>
            </h:commandButton>
        </h:form>


        <h:form id="manageMovieForm">
            <h:panelGrid columns="2">
                <h:outputLabel for="picture" value="picture:"/>
                <h:graphicImage value="#{movieBean.getMovieImageBase64(movieBean.selectedMovie.movieId)}"
                                width="100" height="150"
                                style="display: block; margin-bottom: 15px;"/>


                <h:outputLabel for="editTitle" value="Title:"/>
                <h:inputText id="editTitle" value="#{movieBean.selectedMovie.title}" readonly="true"/>

                <h:outputLabel for="editCategory" value="Categories:"/>
                <h:inputText id="editCategory" value="#{movieBean.selectedMovie.categoryNames}" readonly="true"/>

                <h:outputLabel for="editQuantity" value="Total Copies:"/>
                <h:inputText id="editQuantity" value="#{movieBean.selectedMovie.quantity}" readonly="true"/>

                <h:outputLabel for="editCopiesAvailable" value="Available Copies:"/>
                <h:inputText id="editCopiesAvailable" value="#{movieBean.selectedMovie.copiesAvailable}" readonly="true"/>

            </h:panelGrid>

            <!--  驻转专 住专   拽 -->
            <h:commandButton value="Lost by Customer"
                             action="#{movieBean.movieLostByCustomer}"
                             onclick="return confirm('Are you sure the customer lost this movie?');">
                <f:ajax execute="@form" render="@all"/>
            </h:commandButton>

            <!--  驻转专  注转拽 注  专 (注 prompt) -->
            <h:commandButton value="Lost by Company"
                             onclick="lostCopiesPrompt(); return false;" />

            <h:inputHidden id="lostCopiesInput" value="#{movieBean.lostCopiesCount}" />
            <h:commandButton id="lostCopiesBtn"
                             action="#{movieBean.movieLostByCompany(movieBean.lostCopiesCount)}"
                             style="display:none">
                <f:ajax execute="@form" render="@all" />
            </h:commandButton>




            <h:commandButton value="Add Copies to Inventory"
                             onclick="addCopiesPrompt(); return false;"/>



            <h:inputHidden id="addCopiesInput" value="#{movieBean.addCopiesCount}" />
            <h:commandButton id="addCopiesBtn" action="#{movieBean.addCopiesToInventory}" style="display:none">
                <f:ajax execute="@form" render="@all" />
            </h:commandButton>
        </h:form>
    </h:panelGroup>
</ui:composition>
