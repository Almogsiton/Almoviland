<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <!--
    Page Purpose:
    1. Allows users to submit a loss report for a borrowed movie.
    2. Collects basic credit card information to confirm responsibility for the loss.
    -->

    <h:panelGroup rendered="#{pageController.currentPage eq 'reportLoss'}">
        <h1 class="page-title">Report Lost Movie</h1>

        <p class="loss-payment-note">
    ⚠️ Please note: reporting a lost movie will result in a penalty of 
    <strong>$#{userBean.lossChargeAmount}</strong> being charged to your credit card.
</p>
        <h:form id="lossForm">
            <h:panelGrid columns="1" styleClass="form-grid">

                <h:outputLabel for="creditCard" value="Credit Card Number:"/>
                <h:inputText id="creditCard" value="#{borrowBean.creditCardNumber}" required="true" maxlength="16"/>
                <h:message for="creditCard" styleClass="error-message"/>

                <h:outputLabel for="cvc" value="CVC:"/>
                <h:inputText id="cvc" value="#{borrowBean.cvc}" required="true" maxlength="3"/>
                <h:message for="cvc" styleClass="error-message"/>

                <h:outputLabel value="Expiry Month:"/>
                <h:selectOneMenu value="#{borrowBean.expiryMonth}" required="true">
                    <f:selectItems value="#{userBean.monthOptions}"/>
                </h:selectOneMenu>

                <h:outputLabel value="Expiry Year:"/>
                <h:selectOneMenu value="#{borrowBean.expiryYear}" required="true">
                    <f:selectItems value="#{userBean.yearOptions}"/>
                </h:selectOneMenu>

            </h:panelGrid>

            <br/>

            <h:commandButton value="Submit Loss Report"
                             action="#{borrowBean.submitLossRequest}"
                             styleClass="action-btn"/>
            <h:messages globalOnly="true" showDetail="true"
                        errorClass="error-message" infoClass="success-message"/>
        </h:form>
    </h:panelGroup>


</ui:composition>
